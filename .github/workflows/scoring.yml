on: pull_request_target

env:
  PR_NUMBER: ${{ github.event.pull_request.number }}

jobs:
  job_1:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/upload-artifact@v3
        with:
          name: Test_Files
          path: |
            task_1_predictions.csv
            task_2_predictions.csv
  scoring:
    runs-on: "ubuntu-latest"
    needs: job_1
    steps:
      - uses: actions/download-artifact@v3
        with:
          name: Test_Files
      - uses: actions/checkout@v3
      - uses: actions/setup-python@v3
        with:
          python-version: "3.9"
          cache: "pip"
      - run: pip install -r requirements.txt
      - run: python scoring.py
